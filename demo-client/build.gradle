buildscript {
    ext {
        gradleNodeVersion = '1.2.0'
    }

    repositories {
        mavenCentral()
        maven { url "https://plugins.gradle.org/m2/" }
    }

    dependencies {
        classpath "com.moowork.gradle:gradle-node-plugin:$gradleNodeVersion"
    }
}

apply plugin: 'com.moowork.node'

node {
    version = '10.8.0'
    npmVersion = '6.3.0'
    download = true
    workDir = file("${rootDir}/demo-client/node")
    nodeModulesDir = file("${rootDir}/demo-client")
}

task buildAngular(type: NpmTask, dependsOn: npmInstall) {
	description = 'Build Angular app into Spring ../demo-java/src/main/resources/static directory'
	args = ['run', 'buildToSpring']
}

task cleanAngular(type: Exec) {
	commandLine 'rm', '-rf', '../demo-java/src/main/resources/static'
}

task buildWatch(type: NpmTask, dependsOn: npmInstall) {
    description = 'Build Angular app and watch for changes'
    args = ['run', 'buildWatch']
}